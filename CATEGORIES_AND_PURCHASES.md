# ูุธุงู ุงูุชุตูููุงุช ูุงููุดุชุฑูุงุช - Categories & Purchases System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงูุชุตูููุงุช ูุงููุดุชุฑูุงุช ูุฏุนู:
- โ ูุธุงู ุชุตูููุงุช ุงุญุชุฑุงูู (ุฌุฏูู ูููุตู)
- โ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุชุตูููุงุช
- โ ุตูุญุฉ ุงููุดุชุฑูุงุช ูุน ุฎูุงุฑูู (ูุฏูู + AI Scanner placeholder)
- โ ูุฒุงููุฉ ุชููุงุฆูุฉ ูุน SQLite ุงููุญูู

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 1. ุฌุฏูู Categories ุงูุฌุฏูุฏ

```sql
CREATE TABLE categories (
  id SERIAL PRIMARY KEY,
  store_id INTEGER NOT NULL REFERENCES stores(id),
  name TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  deleted_at TIMESTAMP
);
```

### 2. ุชุญุฏูุซ ุฌุฏูู Products

- ุชู ุฅุถุงูุฉ `category_id` ููุฑุฌุน ูุฌุฏูู `categories`
- ุชู ุงูุงุญุชูุงุธ ุจู `category` (ูุต) ููุชูุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ

```sql
ALTER TABLE products ADD COLUMN category_id INTEGER REFERENCES categories(id);
```

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### Backend:
1. `src/main/categories.ts` - Handlers ูุฅุฏุงุฑุฉ ุงูุชุตูููุงุช
2. `src/main/schema.ts` - ูุญุฏุซ (ุฌุฏูู categories + categoryId ูู products)
3. `src/main/schema-local.ts` - ูุญุฏุซ (ุฏุนู categories ูู SQLite)
4. `src/main/db-local.ts` - ูุญุฏุซ (ุฅูุดุงุก ุฌุฏูู categories)
5. `src/main/sync-service.ts` - ูุญุฏุซ (ูุฒุงููุฉ categories)

### Frontend:
1. `src/renderer/src/pages/Categories.tsx` - ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุชุตูููุงุช
2. `src/renderer/src/pages/Purchases.tsx` - ูุญุฏุซ (ุฎูุงุฑ AI Scanner)
3. `src/renderer/src/pages/Inventory.tsx` - ูุญุฏุซ (ุงุณุชุฎุฏุงู categoryId)

## ๐ฏ ุงูููุฒุงุช

### 1. ุฅุฏุงุฑุฉ ุงูุชุตูููุงุช

**ุงููุธุงุฆู:**
- ุนุฑุถ ุฌููุน ุงูุชุตูููุงุช ูููุชุฌุฑ
- ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ
- ุชุนุฏูู ุชุตููู ููุฌูุฏ
- ุญุฐู ุชุตููู (ูุน ุงูุชุญูู ูู ุนุฏู ุงุณุชุฎุฏุงูู ูู ููุชุฌุงุช)

**ุงููุตูู:** `/categories`

### 2. ุตูุญุฉ ุงููุดุชุฑูุงุช

**ุฎูุงุฑุงู:**

#### ุฃ) ุงูุฅุฏุฎุงู ุงููุฏูู:
- ุฌุฏูู ูุฅุถุงูุฉ ุงูุฃุตูุงู ูุงููููุงุช ูุฃุณุนุงุฑ ุงูุดุฑุงุก
- ุงุฎุชูุงุฑ ุงูููุฑุฏ
- ุทุฑููุฉ ุงูุฏูุน (ูุงุด/ุขุฌู)
- ุฑูู ูุงุชูุฑุฉ ุงูููุฑุฏ

#### ุจ) ุงููุณุงุนุฏ ุงูุฐูู (AI Scanner):
- Placeholder ูุจูุฑ ููุงุถุญ
- ูุต: "ูุฑูุจุงู: ุงููุณุงุนุฏ ุงูุฐูู ูุฅุฏุฎุงู ุงูููุงุชูุฑ"
- ุฅููุงููุฉ ุงูุชุจุฏูู ุจูู ุงููุถุนูู

**ุงููุตูู:** `/purchases`

### 3. ุชุญุฏูุซ ุตูุญุฉ ุงููุฎุฒูู

- ุงุณุชุฎุฏุงู ูุงุฆูุฉ ููุณุฏูุฉ ููุชุตูููุงุช ุจุฏูุงู ูู ุญูู ูุต
- ุฑุงุจุท ุณุฑูุน ูุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ ุฅุฐุง ูู ุชูุฌุฏ ุชุตูููุงุช

## ๐ ุงููุฒุงููุฉ

### SQLite ุงููุญูู:
- ุฌุฏูู `categories` ูู SQLite
- ุนููุฏ `category_id` ูู `products`
- ูุฒุงููุฉ ุชููุงุฆูุฉ ุนูุฏ `syncAll()`

### ุชุฏูู ุงููุฒุงููุฉ:
1. **Pull Categories**: ุณุญุจ ุงูุชุตูููุงุช ูู Neon ุฅูู SQLite
2. **Pull Products**: ุณุญุจ ุงูููุชุฌุงุช ูุน `categoryId`
3. **Push Sales**: ุฏูุน ุงููุจูุนุงุช ูู SQLite ุฅูู Neon

## ๐ก API Endpoints

### Categories:
```typescript
// ุงูุญุตูู ุนูู ุฌููุน ุงูุชุตูููุงุช
await window.api.categories.getAll(storeId)

// ุฅุถุงูุฉ ุชุตููู
await window.api.categories.add({ storeId, name: 'ุงุณู ุงูุชุตููู' })

// ุชุญุฏูุซ ุชุตููู
await window.api.categories.update({ id, storeId, name: 'ุงุณู ุฌุฏูุฏ' })

// ุญุฐู ุชุตููู
await window.api.categories.delete({ id, storeId })
```

## ๐ ุฎุทูุงุช ุงูุงุณุชุฎุฏุงู

### 1. ุฅูุดุงุก ุชุตูููุงุช:
1. ุงุฐูุจ ุฅูู `/categories`
2. ุงุถุบุท "ุฅุถุงูุฉ ุชุตููู"
3. ุฃุฏุฎู ุงุณู ุงูุชุตููู
4. ุงุญูุธ

### 2. ุฑุจุท ููุชุฌ ุจุชุตููู:
1. ุงุฐูุจ ุฅูู `/inventory`
2. ุฃุถู/ุนุฏูู ููุชุฌ
3. ุงุฎุชุฑ ุงูุชุตููู ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ

### 3. ุฅุฏุฎุงู ูุงุชูุฑุฉ ุดุฑุงุก:
1. ุงุฐูุจ ุฅูู `/purchases`
2. ุงุฎุชุฑ "ุฅุฏุฎุงู ูุฏูู" ุฃู "ูุณุงุนุฏ ุฐูู"
3. ุฃุถู ุงูุฃุตูุงู ูุงููููุงุช
4. ุงุญูุธ ุงููุงุชูุฑุฉ

## ๐ง ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ

### ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```bash
# ุชุญุฏูุซ ุงูุณุญุงุจุฉ
npm run db:push-direct

# ุฃู ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช ุงููุจุงุดุฑ
npm run db:push
```

**ููุงุญุธุฉ:** ุณูุชู ุฅุถุงูุฉ ุนููุฏ `category_id` ุฌุฏูุฏ. ุงูููุชุฌุงุช ุงููุฏููุฉ ุณุชุญุชูุธ ุจู `category` (ูุต) ุญุชู ูุชู ุชุญุฏูุซูุง.

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชูุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ:**
   - ุญูู `category` (ูุต) ูุง ุฒุงู ููุฌูุฏุงู ููุชูุงูู
   - ูููู ุงุณุชุฎุฏุงู ููุง ุงูุญูููู ูุนุงู ุฃุซูุงุก ุงูุงูุชูุงู

2. **ุงูุญุฐู ุงูุขูู:**
   - ูุง ูููู ุญุฐู ุชุตููู ูุณุชุฎุฏู ูู ููุชุฌุงุช
   - ูุฌุจ ุฅุฒุงูุฉ ุงูุชุตููู ูู ุฌููุน ุงูููุชุฌุงุช ุฃููุงู

3. **ุงููุฒุงููุฉ:**
   - ุงูุชุตูููุงุช ุชูุณุญุจ ุชููุงุฆูุงู ุนูุฏ ุจุฏุก ุงูุชุทุจูู
   - ุงูููุชุฌุงุช ุชูุญุฏุซ ูุน `categoryId` ุนูุฏ ุงููุฒุงููุฉ

## ๐จ ุงููุงุฌูุฉ

- **ุตูุญุฉ ุงูุชุตูููุงุช**: ุฌุฏูู ุจุณูุท ูุน ุฃุฒุฑุงุฑ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู
- **ุตูุญุฉ ุงููุดุชุฑูุงุช**: 
  - ุฒุฑุงู ูููุตูุงู: "ุฅุฏุฎุงู ูุฏูู" ู "ูุณุงุนุฏ ุฐูู"
  - Placeholder ุฌููู ูููุณุงุนุฏ ุงูุฐูู ูุน ุฃููููุฉ Sparkles
  - ุฅููุงููุฉ ุงูุชุจุฏูู ุจูู ุงููุถุนูู ุฏุงุฎู ุงููุงูุฐุฉ

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุฌุฏูู categories ูู schema.ts
- [x] categoryId ูู products
- [x] handlers ููุชุตูููุงุช
- [x] ุตูุญุฉ Categories.tsx
- [x] ุชุญุฏูุซ Inventory.tsx
- [x] ุชุญุฏูุซ Purchases.tsx (AI Scanner placeholder)
- [x] ุฏุนู SQLite ุงููุญูู
- [x] ูุฒุงููุฉ categories
- [x] ุฅุถุงูุฉ ุฅูู Sidebar ู App.tsx

