# โ ููุฎุต ูุณุฎุฉ ุงูููุจ - IBEX27 Customer Portal

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู

### 1. โ Vercel Serverless Functions (`/api/*`)

ุชู ุฅูุดุงุก 5 Serverless Functions ููุงุชุตุงู ุงููุจุงุดุฑ ุจู Neon Database:

- **`api/customer-auth/login.ts`**
  - ุชุณุฌูู ุฏุฎูู ุงูุนููู
  - ุงูุชุญูู ูู ุฑูู ุงูุฌูุงู ููููุฉ ุงููุฑูุฑ
  - ุฅุฑุฌุงุน ุจูุงูุงุช ุงูุนููู ูุงููุชุงุฌุฑ ุงููุฑุชุจุทุฉ

- **`api/customer-portal/get-store-details.ts`**
  - ุฌูุจ ุชูุงุตูู ุงููุชุฌุฑ
  - ุฌูุจ ุฑุตูุฏ ุงูุนููู ูู ุงููุชุฌุฑ

- **`api/customer-portal/get-products.ts`**
  - ุฌูุจ ูุงุฆูุฉ ุงูููุชุฌุงุช ุงููุชุงุญุฉ ูู ุงููุชุฌุฑ
  - ููุท ุงูููุชุฌุงุช ุงููุฑุฆูุฉ ูู ุงูุจูุงุจุฉ (`showInPortal = true`)

- **`api/customer-portal/get-orders.ts`**
  - ุฌูุจ ุทูุจุงุช ุงูุนููู ูู ุงููุชุฌุฑ
  - ูุน ุชูุงุตูู ูู ุทูุจ (ุงูููุชุฌุงุชุ ุงููููุงุชุ ุงูุฃุณุนุงุฑ)

- **`api/stores/get-by-slug.ts`**
  - ุฌูุจ ุจูุงูุงุช ุงููุชุฌุฑ ุจุงุณุชุฎุฏุงู `slug`
  - ูุณุชุฎุฏู ูู ุตูุญุฉ ุงููุจูุท (`/store/{slug}`)

### 2. โ Web Adapter (`src/renderer/src/lib/web-adapter.ts`)

ุชู ุชุญุฏูุซ Web Adapter ูุงุณุชุฎุฏุงู API ุงูุญูููู ุจุฏูุงู ูู ุงููุญุงูุงุฉ:

- ูุญูู `window.api.customerAuth.login()` โ `fetch('/api/customer-auth/login')`
- ูุญูู `window.api.customerPortal.getStoreDetails()` โ `fetch('/api/customer-portal/get-store-details')`
- ูุนูู ุชููุงุฆูุงู ูู ุจูุฆุฉ ุงููุชุตูุญ (ูุชู ุงุณุชุฏุนุงุคู ูู `main.tsx`)

### 3. โ QR Code Generator (`src/renderer/src/pages/Store.tsx`)

ุชู ุฅุถุงูุฉ ูุณู "ุฑุงุจุท ุจูุงุจุฉ ุงูุนููุงุก" ูู ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ:

- **ุญูู ุงูุฑุงุจุท:** ูุนุฑุถ ุฑุงุจุท ุงููุชุฌุฑ (`https://ibex-web.vercel.app/store/{slug}`)
- **ุฒุฑ "ูุณุฎ":** ููุณุฎ ุงูุฑุงุจุท ุฅูู ุงูุญุงูุธุฉ
- **ุฒุฑ "ุนุฑุถ ููุฏ QR":** ูููุฏ QR Code ููุฑุงุจุท
- **ููุฏุงู QR Code:** ูุนุฑุถ ุงูููุฏ ูุน ุฎูุงุฑ ุงูุชุญููู

### 4. โ Store Landing Page (`src/renderer/src/pages/customer/StoreLanding.tsx`)

ุตูุญุฉ ูุจูุท ุฌุฏูุฏุฉ ูููุชุฌุฑ:

- ุชุนุฑุถ ูุนูููุงุช ุงููุชุฌุฑ (ุงูุงุณูุ ุงููุตูุ ูุนูููุงุช ุงูุชูุงุตู)
- ุชุณูุญ ููุนููู ุจุชุณุฌูู ุงูุฏุฎูู ุฃู ุฅูุดุงุก ุญุณุงุจ
- ุฅุฐุง ูุงู ุงูุนููู ูุณุฌูุงูุ ููุฌูู ูุจุงุดุฑุฉ ุฅูู ุงููุชุฌุฑ

### 5. โ Build Configuration

- **`vite.web.config.ts`:** ุฅุนุฏุงุฏุงุช ุจูุงุก ูุณุฎุฉ ุงูููุจ
- **`vercel.json`:** ุฅุนุฏุงุฏุงุช Vercel (Routes, Build Command)
- **`.vercelignore`:** ุชุฌุงูู ูููุงุช Electron ุนูุฏ ุงูุฑูุน

### 6. โ Documentation

- **`README_WEB.md`:** ุฏููู ุดุงูู ูุฑูุน ุงููุดุฑูุน ุนูู Vercel
- **`DEPLOYMENT.md`:** ุฎุทูุงุช ููุตูุฉ ููุฑูุน ูุงูุงุฎุชุจุงุฑ

## ๐ ูููู ุงูุฑูุงุจุท

```
https://ibex-web.vercel.app/
โโโ /store/{slug}                    โ ุตูุญุฉ ูุจูุท ุงููุชุฌุฑ (ุฌุฏูุฏ)
โโโ /customer/login                  โ ุชุณุฌูู ุฏุฎูู ุงูุนููู
โโโ /customer/dashboard               โ ููุญุฉ ุชุญูู ุงูุนููู
โโโ /customer/store/{storeId}         โ ุนุฑุถ ุงููุชุฌุฑ (ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู)
```

## ๐ฑ ุชุฏูู ุงูุนูู (User Flow)

### ููุนููู:
1. ููุณุญ QR Code ูู ุฌูุงูู
2. ููุชุญ ุงูุฑุงุจุท: `https://ibex-web.vercel.app/store/{slug}`
3. ูุฑู ุตูุญุฉ ุงููุชุฌุฑ
4. ูุณุฌู ุฏุฎูู ุฃู ููุดุฆ ุญุณุงุจ
5. ูุชุตูุญ ุงูููุชุฌุงุช ููุทูุจ

### ููุชุงุฌุฑ:
1. ููุชุญ ุชุทุจูู Electron
2. ูุฐูุจ ุฅูู "ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ"
3. ูุถุบุท "ุนุฑุถ ููุฏ QR ูููุชุฌุฑ"
4. ูุทุจุน ุงูููุฏ ุฃู ูุนุฑุถู ุนูู ุดุงุดุฉ
5. ุงูุนููุงุก ููุณุญูู ุงูููุฏ ููุฏุฎููู!

## ๐ ุฎุทูุงุช ุงูุฑูุน ุงูุณุฑูุนุฉ

1. **ุฑูุน ุนูู Vercel:**
   ```bash
   vercel
   ```
   ุฃู ุนุจุฑ Dashboard: [vercel.com](https://vercel.com)

2. **ุฅุถุงูุฉ Environment Variables:**
   - `DATABASE_URL`: ุฑุงุจุท Neon Database
   - `NEXT_PUBLIC_WEB_URL`: ุฑุงุจุท Vercel (ุจุนุฏ ุงูุฑูุน)

3. **Redeploy:**
   - ุงุถุบุท "Redeploy" ูู Vercel Dashboard

4. **ุงุฎุชุจุงุฑ:**
   - ุงูุชุญ ุงูุฑุงุจุท ูู ุงููุชุตูุญ
   - ุงูุณุญ QR Code ูู ุชุทุจูู Electron

## โ๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### Electron App (ุงูุชุงุฌุฑ/ุงููุงุดูุฑ):
- ูุณุชุฎุฏู `window.api` โ IPC โ Main Process โ Neon Database
- ูุนูู ูุญููุงู ูุน Sync Service (SQLite + Neon)

### Web App (ุงูุนููู):
- ูุณุชุฎุฏู `window.api` โ `fetch()` โ Vercel Functions โ Neon Database
- ูุนูู ูู ุงููุชุตูุญ ููุท (ูุง ูุญุชุงุฌ Electron)

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- **Neon PostgreSQL:** ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ (ุงูุณุญุงุจูุฉ)
- **SQLite (cashier.db):** ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ ููุชุงุฌุฑ (ูู Electron ููุท)

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุจููุฉ ุงููุฌููุฉ:**
   - Electron App ููุชุงุฌุฑ (ูุญูู + ุณุญุงุจู)
   - Web App ููุนููู (ุณุญุงุจู ููุท)

2. **API Functions:**
   - ุฌููุน Functions ูู `/api/*` ุชุนูู ูู Serverless
   - ุชุญุชุงุฌ `DATABASE_URL` ูู Environment Variables
   - Vercel ูุชุนุฑู ุนูููุง ุชููุงุฆูุงู

3. **ุงูุจูุงุก:**
   - `npm run build:web` โ ูุจูู ูุณุฎุฉ ุงูููุจ ููุท
   - `npm run build` โ ูุจูู ูุณุฎุฉ Electron (ููุชุงุฌุฑ)

4. **ุงูุชุทููุฑ:**
   - ูููู ุงุฎุชุจุงุฑ ูุณุฎุฉ ุงูููุจ ูุญููุงู: `npx vite --config vite.web.config.ts`
   - Port: `5174` (ูุฎุชูู ุนู Electron dev server)

## โ Checklist

- [x] ุฅูุดุงุก Vercel Serverless Functions
- [x] ุชุญุฏูุซ Web Adapter
- [x] ุฅุถุงูุฉ QR Code Generator
- [x] ุฅูุดุงุก Store Landing Page
- [x] ุฅุนุฏุงุฏ Build Configuration
- [x] ุฅูุดุงุก Documentation
- [ ] ุฑูุน ุนูู Vercel (ุงูุฎุทูุฉ ุงูุชุงููุฉ)
- [ ] ุงุฎุชุจุงุฑ QR Code ูุน ุนููุงุก ุญูููููู

---

**๐ ุงููุดุฑูุน ุฌุงูุฒ ููุฑูุน ุนูู Vercel!**

ุฑุงุฌุน `DEPLOYMENT.md` ููุฎุทูุงุช ุงูุชูุตูููุฉ.

